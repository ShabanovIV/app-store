"use strict";(self.webpackChunkapp_store=self.webpackChunkapp_store||[]).push([[792],{4840:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(1354),n=r.n(o),a=r(6314),s=r.n(a)()(n());s.push([e.id,"html,body{margin:0;padding:0;min-height:100dvh;overflow:hidden}","",{version:3,sources:["webpack://./src/shared/styles/global.scss"],names:[],mappings:"AAAA,UAEE,QAAA,CACA,SAAA,CACA,iBAAA,CACA,eAAA",sourcesContent:["html,\nbody {\n  margin: 0;\n  padding: 0;\n  min-height: 100dvh;\n  overflow: hidden;\n}\n"],sourceRoot:""}]);const i=s},1527:(e,t,r)=>{r.d(t,{Bg:()=>P,li:()=>y,gu:()=>E,As:()=>I,SV:()=>f,v4:()=>b,Dx:()=>u,rU:()=>p,d2:()=>g,i$:()=>h});var o=r(5307);const n="https://19429ba06ff2.vps.myjino.ru/api",a="123e4567-e89b-12d3-a456-426614174000",s={token:`token-${a}`,user:`user-${a}`},i=e=>{var t,r;t=s.token,r=e,localStorage.setItem(t,r)};var l=r(5816),d=r(378);const h=(0,l.xP)({reducerPath:"userApi",baseQuery:(0,d.cw)({baseUrl:n}),endpoints:e=>({signup:e.mutation({query:e=>({url:"/signup",method:"POST",body:Object.assign(Object.assign({},e),{commandId:a})})}),signin:e.mutation({query:e=>({url:"/signin",method:"POST",body:e})})})}),{useSignupMutation:p,useSigninMutation:u}=h,c={token:(m=s.token,localStorage.getItem(m))};var m;const A=(0,o.Z0)({name:"auth",initialState:c,reducers:{logout(e){e.token=null,(()=>{var e;e=s.token,localStorage.removeItem(e)})()}},extraReducers:e=>{e.addMatcher(h.endpoints.signin.matchFulfilled,((e,t)=>{e.token=t.payload.token,i(t.payload.token)})),e.addMatcher(h.endpoints.signup.matchFulfilled,((e,t)=>{e.token=t.payload.token,i(t.payload.token)}))}}),{logout:R}=A.actions,y=A.reducer,_=e=>e.auth.token,E=(0,l.xP)({reducerPath:"profileApi",baseQuery:(0,d.cw)({baseUrl:n,prepareHeaders:(e,{getState:t})=>{const r=_(t());return r&&e.set("Authorization",`Bearer ${r}`),e}}),endpoints:e=>({profile:e.query({query:()=>({url:"/profile",method:"GET"})}),updateProfile:e.mutation({query:e=>({url:"/profile",method:"PATCH",body:e})}),changePassword:e.mutation({query:e=>({url:"/profile/change-password",method:"POST",body:e})})})}),{useProfileQuery:b,useUpdateProfileMutation:g,useChangePasswordMutation:f}=E;var x=r(1468);const j=x.wA.withTypes(),v=x.d4,I=()=>{const e=v(_);return{isAuth:null!==e,token:e}};var O=r(4848),S=r(7450),w=r(8084),N=r(4336),k=r(6921),T=r(4753),C=r(294);const P=()=>{const{isAuth:e}=I(),t=j(),r=[{key:"main",label:e?"Account":(0,O.jsx)(T.N_,{to:C.bw.auth.path,children:C.bw.auth.title}),icon:e&&(0,O.jsx)(S.A,{}),children:e?[{key:"profile",label:(0,O.jsx)(T.N_,{to:C.bw.profile.path,children:C.bw.profile.title}),icon:(0,O.jsx)(w.A,{})},{key:"logout",label:"Logout",icon:(0,O.jsx)(N.A,{})}]:void 0}];return(0,O.jsx)(k.A,{onClick:e=>{"logout"===e.key&&t(R())},theme:"dark",mode:"horizontal",style:{flex:"auto",minWidth:0,overflow:"visible"},selectable:!1,items:r})}},9306:(e,t,r)=>{var o=r(4848),n=r(6540),a=r(5338),s=r(1468),i=r(4753),l=r(5307),d=r(1527);const h=(0,l.U1)({reducer:{auth:d.li,[d.i$.reducerPath]:d.i$.reducer,[d.gu.reducerPath]:d.gu.reducer},middleware:e=>e().concat(d.i$.middleware).concat(d.gu.middleware),devTools:!0});var p=r(1568),u=r(4547),c=r(3741);class m extends n.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{hasError:!1,error:null}}),Object.defineProperty(this,"handleRetry",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({hasError:!1,error:null})}})}static getDerivedStateFromError(e){return(0,c.rf)(e)?{hasError:!0,error:new Error((0,c._h)(e))}:(0,c.K8)(e)?{hasError:!0,error:new Error(e.message)}:{hasError:!0,error:new Error("Unknown error.")}}componentDidCatch(e,t){console.error("AppErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?(0,o.jsx)(p.Ay,{status:"500",subTitle:"Something went wrong.",extra:(0,o.jsx)(u.Ay,{onClick:this.handleRetry,type:"primary",children:"Try again"})}):this.props.children}}var A=r(6406),R=r(4118),y=r(6921),_=r(294);const E=()=>{const e=(0,i.zy)(),{isAuth:t}=(0,d.As)(),r=[...(0,_.pH)(),...t?(0,_.bb)():[]].filter((e=>e.isMenuItem)).map((e=>({key:e.path,label:(0,o.jsx)(i.N_,{to:e.path,children:e.title})})));return(0,o.jsx)(y.A,{theme:"dark",mode:"horizontal",style:{flex:1,width:"100%",minWidth:0,overflow:"visible"},selectedKeys:[e.pathname],items:r})},b=r.p+"images/Logoc389529f86f9af6c57ba.ico",g=()=>{const e=[{key:"logo",label:(0,o.jsx)(i.N_,{to:"/",children:(0,o.jsx)("img",{src:b,alt:"App Store",className:"Logo-module_logo-NpPh8"})})}];return(0,o.jsx)(y.A,{theme:"dark",mode:"horizontal",selectable:!1,items:e})},{Header:f}=A.A,x=()=>(0,o.jsxs)(f,{className:"AppHeader-module_header-zuk5F",children:[(0,o.jsx)(g,{}),(0,o.jsx)("div",{className:"AppHeader-module_menuContainer-vDTAG",children:(0,o.jsx)(E,{})}),(0,o.jsx)("div",{className:"AppHeader-module_userMenu-s_f7z",children:(0,o.jsx)(d.Bg,{})})]}),j=({children:e})=>(0,o.jsxs)(A.A,{className:"AppLayout-module_layout-fQ34W",children:[(0,o.jsx)(x,{}),(0,o.jsx)(R.UC,{className:"AppLayout-module_content-hSilA",children:e}),(0,o.jsx)(R.wi,{className:"AppLayout-module_footer-tj07I",children:"Footer content"})]}),v=({children:e})=>(0,o.jsx)(m,{children:(0,o.jsx)(i.I9,{children:(0,o.jsx)(s.Kq,{store:h,children:(0,o.jsx)(j,{children:e})})})}),I=({children:e})=>{const{isAuth:t}=(0,d.As)(),r=(0,i.zy)();return t?e:(0,o.jsx)(i.C5,{to:_.bw.auth.path,state:{from:r.pathname},replace:!0})},O=(0,n.lazy)((()=>r.e(129).then(r.bind(r,7129)))),S=(0,n.lazy)((()=>Promise.all([r.e(611),r.e(444)]).then(r.bind(r,3444)))),w=(0,n.lazy)((()=>Promise.all([r.e(611),r.e(761),r.e(801)]).then(r.bind(r,5801)))),N=[{path:_.bw.home.path,element:(0,o.jsx)(O,{})},{path:_.bw.auth.path,element:(0,o.jsx)(S,{})},{path:_.bw.profile.path,element:(0,o.jsx)(w,{})}],k=e=>e&&(0,_.bb)().map((e=>(0,o.jsx)(i.qh,{path:e.path,element:(0,o.jsx)(I,{children:T(e.path)})},e.path))),T=e=>{const t=N.find((t=>t.path===e));return t?t.element:(0,o.jsx)(p.Ay,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,o.jsx)(u.Ay,{onClick:()=>window.location.href=_.bw.home.path,type:"primary",children:"Back Home"})})},C=()=>{const{isAuth:e}=(0,d.As)();return(0,o.jsxs)(i.BV,{children:[(0,_.pH)().map((e=>e.type===_.PA.private?(0,o.jsx)(i.qh,{path:e.path,element:(0,o.jsx)(I,{children:T(e.path)})},e.path):(0,o.jsx)(i.qh,{path:e.path,element:T(e.path)},e.path))),k(e)]})};var P=r(5072),D=r.n(P),L=r(7825),H=r.n(L),U=r(7659),M=r.n(U),V=r(5056),z=r.n(V),F=r(540),W=r.n(F),q=r(1113),Q=r.n(q),B=r(4840),$={};$.styleTagTransform=Q(),$.setAttributes=z(),$.insert=M().bind(null,"head"),$.domAPI=H(),$.insertStyleElement=W(),D()(B.A,$),B.A&&B.A.locals&&B.A.locals,a.createRoot(document.getElementById("root")).render((0,o.jsx)(n.StrictMode,{children:(0,o.jsx)((()=>(0,o.jsx)(v,{children:(0,o.jsx)(C,{})})),{})}))},3741:(e,t,r)=>{var o;r.d(t,{Hr:()=>n,IG:()=>a,K8:()=>i,O4:()=>o,_h:()=>s,rf:()=>d}),function(e){e.ERR_INCORRECT_EMAIL_OR_PASSWORD="ERR_INCORRECT_EMAIL_OR_PASSWORD",e.ERR_ACCOUNT_ALREADY_EXIST="ERR_ACCOUNT_ALREADY_EXIST",e.ERR_FIELD_REQUIRED="ERR_FIELD_REQUIRED",e.ERR_INCORRECT_PASSWORD="ERR_INCORRECT_PASSWORD",e.ERR_INVALID_PASSWORD="ERR_INVALID_PASSWORD",e.ERR_NOT_VALID="ERR_NOT_VALID",e.ERR_AUTH="ERR_AUTH",e.ERR_NO_FILES="ERR_NO_FILES",e.ERR_NOT_ALLOWED="ERR_NOT_ALLOWED",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_VALIDATION_ERROR="ERR_VALIDATION_ERROR",e.ERR_INVALID_QUERY_PARAMS="ERR_INVALID_QUERY_PARAMS",e.ERR_INTERNAL_SERVER="ERR_INTERNAL_SERVER"}(o||(o={}));const n=e=>{throw l(e)?e.data:e},a=(e,t)=>e.errors.some((e=>t.includes(e.extensions.code))),s=e=>e.errors.map((e=>e.message)).join("\n"),i=e=>"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message,l=e=>"object"==typeof e&&null!==e&&!(!("data"in e)||!d(null==e?void 0:e.data)),d=e=>"object"==typeof e&&null!==e&&!(!("errors"in e)||!Array.isArray(e.errors))&&e.errors.every((e=>"object"==typeof e&&null!==e&&"string"==typeof e.name&&"string"==typeof e.message&&"string"==typeof e.stack&&"extensions"in e&&"object"==typeof e.extensions&&null!==e.extensions&&!("string"!=typeof e.extensions.code||!Object.values(o).includes(e.extensions.code))&&(!("fieldName"in e)||"string"==typeof e.fieldName)))},294:(e,t,r)=>{r.d(t,{PA:()=>o,bb:()=>s,bw:()=>n,pH:()=>a});const o={public:"public",private:"private",privateHidden:"privateHidden"},n={home:{path:"/",title:"Home",type:o.public,isMenuItem:!0},test:{path:"/test",title:"Catalog",type:o.private,isMenuItem:!0},auth:{path:"/auth",title:"Sign In",type:o.public,isMenuItem:!1},profile:{path:"/profile",title:"Profile",type:o.privateHidden,isMenuItem:!1}},a=()=>Object.keys(n).map((e=>n[e])).filter((e=>e.type!==o.privateHidden)),s=()=>Object.keys(n).map((e=>n[e])).filter((e=>e.type===o.privateHidden))}},e=>{e.O(0,[101],(()=>e(e.s=9306))),e.O()}]);
//# sourceMappingURL=main.c09163e61a3d063bd519.js.map
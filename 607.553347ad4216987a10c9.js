"use strict";(self.webpackChunkapp_store=self.webpackChunkapp_store||[]).push([[607],{7607:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var r=s(4848),n=s(6540);const i={list:"RenderList-module_list-BF_R0",listGrid:"RenderList-module_listGrid-VEEh9",listItem:"RenderList-module_listItem-d2Xxn",fadeIn:"RenderList-module_fade-in-KfGGK"},a=({isGrid:e,items:t,lastItemRef:s,onLastItemChanged:n})=>{if(0===t.length)return(0,r.jsx)("div",{className:i.empty,children:"No items to display"});const a=t.map(((e,i)=>(0,r.jsx)(l,{item:e,ref:d({items:t,index:i,onLastItemChanged:n,lastItemRef:s})},e.key)));return(0,r.jsx)("ul",{className:`${i.list} ${e?i.listGrid:""}`,children:a})},o=(0,n.forwardRef)((({item:e},t)=>(0,r.jsx)("li",{id:e.key,ref:t,className:i.listItem,children:e.render()})));o.displayName="ListItem";const l=(0,n.memo)(o),d=({items:e,index:t,onLastItemChanged:s,lastItemRef:r})=>n=>{t===e.length-1&&r&&(r.current=n,s(e[e.length-1].key))},c=({isGrid:e,items:t,onLastItem:s})=>{const[i,o]=(0,n.useState)(""),l=(0,n.useRef)(""),d=(0,n.useRef)(null),c=(0,n.useRef)(!1),m=(0,n.useCallback)((e=>{const t=e[0];(null==t?void 0:t.isIntersecting)&&!c.current&&(c.current=!0,s())}),[s]);return(0,n.useEffect)((()=>{if(i===l.current)return;l.current=i;const e=new IntersectionObserver(m,{threshold:1}),t=d.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[m,i]),(0,n.useEffect)((()=>{c.current=!1}),[i]),(0,r.jsx)(a,{isGrid:e,items:t,lastItemRef:d,onLastItemChanged:o})};var m=s(5662),u=s(2702),h=s(6928);const f=({category:e,onClick:t,onRemove:s,onEdit:n})=>(0,r.jsxs)("div",{className:"CategoryCard-module_category-EaJMh",onClick:()=>{t&&t()},children:[e.photo&&(0,r.jsx)("img",{src:e.photo,alt:e.name}),(0,r.jsx)("h3",{children:e.name}),(0,r.jsxs)(u.A,{children:[n&&(0,r.jsx)(h.Ay,{onClick:n,children:"Edit"}),s&&(0,r.jsx)(h.Ay,{danger:!0,onClick:s,children:"Delete"})]})]});var g=s(7231);const p=()=>{const{hasMore:e,categories:t,errorElement:s,handleLastItem:i}=(()=>{const e=(0,n.useRef)([]),[t,s]=(0,n.useState)(1),[i,a]=(0,n.useState)(!0),[o,l]=(0,n.useState)([]),{data:d,isFetching:c,isLoading:u,error:h,refetch:p}=(0,m.Wm)({pagination:{pageSize:10,pageNumber:t}},{skip:0===t||e.current.includes(t)}),{errorElement:C}=(0,g.u)({error:h}),k=(0,n.useCallback)((()=>{i&&!c&&s((e=>e+1))}),[i,c]);return(0,n.useEffect)((()=>{u&&c&&l([])}),[c,u]),(0,n.useEffect)((()=>{d&&d.data.length>0&&!e.current.includes(t)&&d.pagination.pageNumber===t?(e.current.push(t),l((e=>[...e,...d.data.map((e=>(({category:e,onClick:t,onEdit:s,onDelete:n})=>({key:e.id,render:()=>(0,r.jsx)(f,{category:e,onClick:t?()=>t(e.id):void 0,onEdit:s?()=>s(e.id):void 0,onRemove:n?()=>n(e.id):void 0})}))({category:e,onClick:()=>console.log(`Category ${e.name} clicked`)})))]))):d&&d.data.length<10&&a(!1)}),[d,t]),{hasMore:i,categories:o,errorElement:C,refetch:p,handleLastItem:k}})();return(0,r.jsxs)("div",{className:"CategoryList-module_container-JHTbf",children:[s,(0,r.jsx)(c,{isGrid:!0,items:t,onLastItem:i}),!e&&(0,r.jsx)("p",{className:"CategoryList-module_end-M57dM",children:"Все категории загружены"})]})},C=()=>(0,r.jsx)(p,{})},7231:(e,t,s)=>{s.d(t,{u:()=>a});var r=s(6540),n=s(5142),i=s(5515);const a=({form:e,error:t})=>{const[s,a]=n.Ay.useMessage();return(0,r.useEffect)((()=>{if(t){(0,i.jS)(t),e&&e.setFields((0,i.z6)(t));const r=(0,i.bu)(t);r&&s.error(r)}}),[t,e,s]),{errorElement:a}}}}]);
//# sourceMappingURL=607.553347ad4216987a10c9.js.map
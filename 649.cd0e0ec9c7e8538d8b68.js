"use strict";(self.webpackChunkapp_store=self.webpackChunkapp_store||[]).push([[649],{6649:(e,s,r)=>{r.r(s),r.d(s,{default:()=>y});var n=r(4848),a=r(6540),o=r(9646),i=r(6552),t=r(2702),l=r(4547),c=r(4753),d=r(7668),u=r(4931),m=r(4716),p=r(2263),h=r(2052),f=r(7231);const w=({onSuccess:e})=>{const[s]=d.A.useForm(),r=(0,p.f)(),{signIn:o,isLoading:i,isSuccess:t}=(e=>{const[s,{isLoading:r,isSuccess:n,error:a}]=(0,h.Dx)();return(0,f.u)({form:e,error:a}),{signIn:(e,r)=>{return n=void 0,a=void 0,i=function*(){yield s({email:e,password:r})},new((o=void 0)||(o=Promise))((function(e,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function t(e){try{l(i.throw(e))}catch(e){s(e)}}function l(s){var n;s.done?e(s.value):(n=s.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,t)}l((i=i.apply(n,a||[])).next())}));var n,a,o,i},isLoading:r,isSuccess:n}})(s);return(0,a.useEffect)((()=>{t&&e()}),[t,e]),(0,n.jsxs)(d.A,{form:s,name:"SignInForm",labelCol:{span:8},labelAlign:"left",wrapperCol:{span:16},onFinish:e=>{e.email&&e.password&&o(e.email,e.password)},autoComplete:"off",children:[(0,n.jsx)(d.A.Item,{label:"Email",name:"email",rules:r(p.C.email),children:(0,n.jsx)(u.A,{})}),(0,n.jsx)(d.A.Item,{label:"Password",name:"password",rules:r(p.C.password),children:(0,n.jsx)(u.A.Password,{})}),(0,n.jsx)(d.A.Item,{label:null,children:(0,n.jsx)(l.Ay,{style:{width:"100%"},type:"primary",htmlType:"submit",children:i?(0,n.jsx)(m.A,{}):"Sign In"})})]})};const x=({onSuccess:e})=>{const[s]=d.A.useForm(),r=(e=>{const s=(0,p.f)();return r=>({email:s(p.C.email),password:s(p.C.password),confirm:[{required:!0,message:"Please confirm your password"},{validator:(s,r,n)=>{r&&r!==e.getFieldValue("password")?n("Passwords do not match"):n()}}]}[r])})(s),{signUp:o,isLoading:i,isSuccess:t}=(e=>{const[s,{isLoading:r,isSuccess:n,error:a}]=(0,h.rU)();return(0,f.u)({form:e,error:a}),{signUp:(e,r)=>{return n=void 0,a=void 0,i=function*(){yield s({email:e,password:r})},new((o=void 0)||(o=Promise))((function(e,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function t(e){try{l(i.throw(e))}catch(e){s(e)}}function l(s){var n;s.done?e(s.value):(n=s.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,t)}l((i=i.apply(n,a||[])).next())}));var n,a,o,i},isLoading:r,isSuccess:n}})(s);return(0,a.useEffect)((()=>{t&&e()}),[t,e]),(0,n.jsxs)(d.A,{form:s,name:"SignUpForm",labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},onFinish:e=>{e.email&&e.password&&o(e.email,e.password)},autoComplete:"off",children:[(0,n.jsx)(d.A.Item,{label:"Email",name:"email",rules:r("email"),children:(0,n.jsx)(u.A,{})}),(0,n.jsx)(d.A.Item,{label:"Password",name:"password",rules:r("password"),children:(0,n.jsx)(u.A.Password,{})}),(0,n.jsx)(d.A.Item,{label:"Confirm",name:"confirm",rules:r("confirm"),children:(0,n.jsx)(u.A.Password,{})}),(0,n.jsx)(d.A.Item,{label:null,children:(0,n.jsx)(l.Ay,{disabled:i,style:{width:"100%"},type:"primary",htmlType:"submit",children:i?(0,n.jsx)(m.A,{tip:(0,n.jsx)("div",{children:"Loading..."})}):"Join"})})]})},{Text:A}=o.A,j=()=>{const[e,s]=(0,a.useState)(!0),r=(0,c.Zp)(),o=(0,c.zy)(),d=()=>{var e;const s=(null===(e=o.state)||void 0===e?void 0:e.from)||"/";r(s,{replace:!0})};return(0,n.jsxs)("div",{className:"AuthSwitcher-module_authCard-TUn7g",children:[(0,n.jsx)("h4",{className:"AuthSwitcher-module_title-um9uJ",children:e?"Log in to your account":"Enter your email and create a password"}),(0,n.jsx)(i.A,{}),e?(0,n.jsx)(w,{onSuccess:d}):(0,n.jsx)(x,{onSuccess:d}),(0,n.jsx)(i.A,{}),(0,n.jsxs)(t.A,{direction:"vertical",align:"center",style:{width:"100%"},children:[(0,n.jsx)(A,{type:"secondary",children:e?"Don't have an account?":"Already have an account?"}),(0,n.jsx)(l.Ay,{type:"link",onClick:()=>{s((e=>!e))},children:e?"Join":"Sign In"})]})]})},y=()=>(0,n.jsx)(j,{})},7231:(e,s,r)=>{r.d(s,{u:()=>i});var n=r(6540),a=r(3448),o=r(5515);const i=({form:e,error:s})=>{const{showError:r}=(0,a.J)();(0,n.useEffect)((()=>{if(s){(0,o.jS)(s),e&&e.setFields((0,o.z6)(s));const n=(0,o.bu)(s);n&&r(n)}}),[s,e,r])}},3448:(e,s,r)=>{r.d(s,{J:()=>o});var n=r(6540),a=r(582);const o=()=>{const e=(0,n.useContext)(a.N);if(!e)throw new Error("useMessage должен использоваться внутри <MessageProvider>");return e}},2263:(e,s,r)=>{r.d(s,{C:()=>n,f:()=>a});const n={email:"email",password:"password"},a=()=>e=>({email:[{required:!0,message:"Please input your email"},{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Please enter a valid email address"}],password:[{required:!0,message:"Please enter your password"}]}[e])}}]);
//# sourceMappingURL=649.cd0e0ec9c7e8538d8b68.js.map
"use strict";(self.webpackChunkapp_store=self.webpackChunkapp_store||[]).push([[792],{4840:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(1354),s=r.n(n),a=r(6314),o=r.n(a)()(s());o.push([e.id,"html,body{margin:0;padding:0;min-height:100dvh}","",{version:3,sources:["webpack://./src/shared/styles/global.scss"],names:[],mappings:"AAAA,UAEE,QAAA,CACA,SAAA,CACA,iBAAA",sourcesContent:["html,\nbody {\n  margin: 0;\n  padding: 0;\n  min-height: 100dvh;\n}"],sourceRoot:""}]);const i=o},2052:(e,t,r)=>{r.d(t,{li:()=>n.Ay,gu:()=>l,As:()=>p,SV:()=>u,v4:()=>d,Dx:()=>s.Dx,rU:()=>s.rU,d2:()=>h,i$:()=>s.i$});var n=r(3505),s=r(3562),a=r(5816),o=r(378),i=r(4180);const l=(0,a.xP)({reducerPath:"profileApi",baseQuery:(0,o.cw)({baseUrl:i.J,prepareHeaders:(e,{getState:t})=>{const r=(0,n.Cd)(t());return r&&e.set("Authorization",`Bearer ${r}`),e}}),endpoints:e=>({profile:e.query({query:()=>({url:"/profile",method:"GET"})}),updateProfile:e.mutation({query:e=>({url:"/profile",method:"PATCH",body:e})}),changePassword:e.mutation({query:e=>({url:"/profile/change-password",method:"POST",body:e})})})}),{useProfileQuery:d,useUpdateProfileMutation:h,useChangePasswordMutation:u}=l;var c=r(2565);const p=()=>{const e=(0,c.G)(n.Cd);return{isAuth:null!==e,token:e}}},3505:(e,t,r)=>{r.d(t,{Ay:()=>c,ri:()=>u,Cd:()=>p});var n=r(5307),s=r(4180);const a={token:`token-${s.r}`,user:`user-${s.r}`},o=e=>{var t,r;t=a.token,r=e,localStorage.setItem(t,r)};var i=r(3562);const l={token:(d=a.token,localStorage.getItem(d))};var d;const h=(0,n.Z0)({name:"auth",initialState:l,reducers:{logout(e){e.token=null,(()=>{var e;e=a.token,localStorage.removeItem(e)})()}},extraReducers:e=>{e.addMatcher(i.i$.endpoints.signin.matchFulfilled,((e,t)=>{e.token=t.payload.token,o(t.payload.token)})),e.addMatcher(i.i$.endpoints.signup.matchFulfilled,((e,t)=>{e.token=t.payload.token,o(t.payload.token)}))}}),{logout:u}=h.actions,c=h.reducer,p=e=>e.auth.token},3562:(e,t,r)=>{r.d(t,{Dx:()=>l,i$:()=>o,rU:()=>i});var n=r(5816),s=r(378),a=r(4180);const o=(0,n.xP)({reducerPath:"userApi",baseQuery:(0,s.cw)({baseUrl:a.J}),endpoints:e=>({signup:e.mutation({query:e=>({url:"/signup",method:"POST",body:Object.assign(Object.assign({},e),{commandId:a.r})})}),signin:e.mutation({query:e=>({url:"/signin",method:"POST",body:e})})})}),{useSignupMutation:i,useSigninMutation:l}=o},112:(e,t,r)=>{var n=r(4848),s=r(6540),a=r(5338),o=r(1468),i=r(4753),l=r(5307),d=r(2052);const h=(0,l.U1)({reducer:{auth:d.li,[d.i$.reducerPath]:d.i$.reducer,[d.gu.reducerPath]:d.gu.reducer},middleware:e=>e().concat(d.i$.middleware).concat(d.gu.middleware),devTools:!0});var u=r(1568),c=r(6928),p=r(3741);class m extends s.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{hasError:!1,error:null}}),Object.defineProperty(this,"handleRetry",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({hasError:!1,error:null})}})}static getDerivedStateFromError(e){return(0,p.rf)(e)?{hasError:!0,error:new Error((0,p._h)(e))}:(0,p.K8)(e)?{hasError:!0,error:new Error(e.message)}:{hasError:!0,error:new Error("Unknown error.")}}componentDidCatch(e,t){console.error("AppErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?(0,n.jsx)(u.Ay,{status:"500",subTitle:"Something went wrong.",extra:(0,n.jsx)(c.Ay,{onClick:this.handleRetry,type:"primary",children:"Try again"})}):this.props.children}}const R=({children:e})=>(0,n.jsx)("main",{className:"AppContent-module_content-X1q5X",children:e});var A=r(4336),y=r(3505);const E="public",_="private",g="privateHidden",j={home:{path:"/",title:"Home",type:E,isMenuItem:!0},test:{path:"/test",title:"Catalog",type:_,isMenuItem:!0},auth:{path:"/auth",title:"Sign In",type:E,isMenuItem:!1},profile:{path:"/profile",title:"Profile",type:g,isMenuItem:!0}},x=()=>Object.keys(j).map((e=>j[e])).filter((e=>e.type!==g)),f=()=>Object.keys(j).map((e=>j[e])).filter((e=>e.type===g));var I=r(2565);const b="AppMenu-module_item-h591S",O=()=>{const{isAuth:e}=(0,d.As)(),t=(0,I.j)(),r=(0,i.Zp)(),s=[...x(),...e?f():[]].filter((e=>e.isMenuItem));return(0,n.jsxs)("ul",{className:"AppMenu-module_menu-kIy7w",children:[s.map((e=>(0,n.jsx)("li",{className:b,children:(0,n.jsx)(i.N_,{to:e.path,children:e.title})},e.path))),(0,n.jsx)("li",{className:b,onClick:()=>{e&&(t((0,y.ri)()),r(j.auth.path))},children:e?(0,n.jsx)(A.A,{style:{cursor:"pointer"}}):(0,n.jsx)(i.N_,{to:j.auth.path,children:j.auth.title})},"signin-signout")]})},S=r.p+"images/Logoc389529f86f9af6c57ba.ico",N=()=>(0,n.jsx)("div",{className:"Logo-module_logo-NpPh8",children:(0,n.jsx)(i.N_,{to:"/",children:(0,n.jsx)("img",{src:S,alt:"App Store"})})}),v=()=>(0,n.jsxs)("header",{className:"AppHeader-module_header-zuk5F",children:[(0,n.jsx)(N,{}),(0,n.jsx)(O,{})]}),C=({children:e})=>(0,n.jsxs)("div",{className:"AppLayout-module_layout-fQ34W",children:[(0,n.jsx)(v,{}),(0,n.jsx)(R,{children:e})]}),T=({children:e})=>(0,n.jsx)(m,{children:(0,n.jsx)(i.I9,{children:(0,n.jsx)(o.Kq,{store:h,children:(0,n.jsx)(C,{children:e})})})}),k=({children:e})=>{const{isAuth:t}=(0,d.As)(),r=(0,i.zy)();return t?e:(0,n.jsx)(i.C5,{to:j.auth.path,state:{from:r.pathname},replace:!0})},P=(0,s.lazy)((()=>r.e(129).then(r.bind(r,7129)))),D=(0,s.lazy)((()=>Promise.all([r.e(665),r.e(804)]).then(r.bind(r,9804)))),w=(0,s.lazy)((()=>Promise.all([r.e(665),r.e(761),r.e(352)]).then(r.bind(r,9352)))),L=[{path:j.home.path,element:(0,n.jsx)(P,{})},{path:j.auth.path,element:(0,n.jsx)(D,{})},{path:j.profile.path,element:(0,n.jsx)(w,{})}],U=e=>e&&f().map((e=>(0,n.jsx)(i.qh,{path:e.path,element:(0,n.jsx)(k,{children:M(e.path)})},e.path))),M=e=>{const t=L.find((t=>t.path===e));return t?t.element:(0,n.jsx)(u.Ay,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,n.jsx)(c.Ay,{onClick:()=>window.location.href=j.home.path,type:"primary",children:"Back Home"})})},V=()=>{const{isAuth:e}=(0,d.As)();return(0,n.jsxs)(i.BV,{children:[x().map((e=>e.type===_?(0,n.jsx)(i.qh,{path:e.path,element:(0,n.jsx)(k,{children:M(e.path)})},e.path):(0,n.jsx)(i.qh,{path:e.path,element:M(e.path)},e.path))),U(e)]})};var q=r(5072),$=r.n(q),F=r(7825),H=r.n(F),Q=r(7659),W=r.n(Q),z=r(5056),B=r.n(z),G=r(540),X=r.n(G),Y=r(1113),J=r.n(Y),K=r(4840),Z={};Z.styleTagTransform=J(),Z.setAttributes=B(),Z.insert=W().bind(null,"head"),Z.domAPI=H(),Z.insertStyleElement=X(),$()(K.A,Z),K.A&&K.A.locals&&K.A.locals,a.createRoot(document.getElementById("root")).render((0,n.jsx)(s.StrictMode,{children:(0,n.jsx)((()=>(0,n.jsx)(T,{children:(0,n.jsx)(V,{})})),{})}))},3741:(e,t,r)=>{var n;r.d(t,{Hr:()=>s,IG:()=>a,K8:()=>i,O4:()=>n,_h:()=>o,rf:()=>d}),function(e){e.ERR_INCORRECT_EMAIL_OR_PASSWORD="ERR_INCORRECT_EMAIL_OR_PASSWORD",e.ERR_ACCOUNT_ALREADY_EXIST="ERR_ACCOUNT_ALREADY_EXIST",e.ERR_FIELD_REQUIRED="ERR_FIELD_REQUIRED",e.ERR_INCORRECT_PASSWORD="ERR_INCORRECT_PASSWORD",e.ERR_INVALID_PASSWORD="ERR_INVALID_PASSWORD",e.ERR_NOT_VALID="ERR_NOT_VALID",e.ERR_AUTH="ERR_AUTH",e.ERR_NO_FILES="ERR_NO_FILES",e.ERR_NOT_ALLOWED="ERR_NOT_ALLOWED",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_VALIDATION_ERROR="ERR_VALIDATION_ERROR",e.ERR_INVALID_QUERY_PARAMS="ERR_INVALID_QUERY_PARAMS",e.ERR_INTERNAL_SERVER="ERR_INTERNAL_SERVER"}(n||(n={}));const s=e=>{throw l(e)?e.data:e},a=(e,t)=>e.errors.some((e=>t.includes(e.extensions.code))),o=e=>e.errors.map((e=>e.message)).join("\n"),i=e=>"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message,l=e=>"object"==typeof e&&null!==e&&!(!("data"in e)||!d(null==e?void 0:e.data)),d=e=>"object"==typeof e&&null!==e&&!(!("errors"in e)||!Array.isArray(e.errors))&&e.errors.every((e=>"object"==typeof e&&null!==e&&"string"==typeof e.name&&"string"==typeof e.message&&"string"==typeof e.stack&&"extensions"in e&&"object"==typeof e.extensions&&null!==e.extensions&&!("string"!=typeof e.extensions.code||!Object.values(n).includes(e.extensions.code))&&(!("fieldName"in e)||"string"==typeof e.fieldName)))},4180:(e,t,r)=>{r.d(t,{J:()=>n,r:()=>s});const n="https://19429ba06ff2.vps.myjino.ru/api",s="123e4567-e89b-12d3-a456-426614174000"},2565:(e,t,r)=>{r.d(t,{G:()=>a,j:()=>s});var n=r(1468);const s=n.wA.withTypes(),a=n.d4}},e=>{e.O(0,[220],(()=>e(e.s=112))),e.O()}]);
//# sourceMappingURL=main.4f8e6b84170d55bab46a.js.map
"use strict";(self.webpackChunkapp_store=self.webpackChunkapp_store||[]).push([[448],{448:(e,s,r)=>{r.r(s),r.d(s,{default:()=>P});var a=r(4848),n=r(6540),t=r(9646),o=r(6552),l=r(2702),c=r(6928),i=r(7668),d=r(4931),u=r(4716),m=r(2052),p=r(7231),f=r(5142);const w=({isSuccess:e,mess:s})=>{const[r,a]=f.Ay.useMessage(),t=(0,n.useCallback)((()=>{r.open({type:"success",content:s})}),[s]);return(0,n.useEffect)((()=>{e&&t()}),[e,t]),{successElement:a}};const h=()=>{const[e,s]=(0,n.useState)(!1),[r]=i.A.useForm(),{data:t,update:o,errorElement:l,errorUpdateElement:f,successElement:h,isUpdateSuccess:y,isLoading:x,isUpdating:g}=(e=>{const{data:s,refetch:r,isLoading:a,isSuccess:n,error:t}=(0,m.v4)(),[o,{isLoading:l,isSuccess:c,error:i}]=(0,m.d2)(),{errorElement:d}=(0,p.u)({form:e,error:t}),{errorElement:u}=(0,p.u)({form:e,error:i}),{successElement:f}=w({isSuccess:c,mess:"Data saved successfully"});return{data:s,refetch:r,update:e=>{return s=void 0,r=void 0,n=function*(){yield o({name:e})},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{c(n.next(e))}catch(e){t(e)}}function l(e){try{c(n.throw(e))}catch(e){t(e)}}function c(s){var r;s.done?e(s.value):(r=s.value,r instanceof a?r:new a((function(e){e(r)}))).then(o,l)}c((n=n.apply(s,r||[])).next())}));var s,r,a,n},errorElement:d,errorUpdateElement:u,successElement:f,isLoading:a,isUpdating:l,isUpdateSuccess:c,isSuccess:n}})(r);return(0,n.useEffect)((()=>{t&&r.setFieldsValue(t)}),[t,r]),(0,n.useEffect)((()=>{y&&s(!1)}),[y]),(0,a.jsxs)(i.A,{form:r,name:"ProfileForm",labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},onFinish:e=>{o(e.name)},autoComplete:"off",children:[l,f,h,(0,a.jsx)(i.A.Item,{label:"Full Name",name:"name",rules:(A="name",{name:[{required:!0,message:"Please enter your username"},{min:3,max:20,message:"Username must be between 3 and 20 characters"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Username can only contain letters, numbers, and underscores"}]}[A]),children:(0,a.jsx)(d.A,{onChange:()=>{s(!0)},placeholder:"John Doe"})}),(0,a.jsx)(i.A.Item,{label:"Email",name:"email",children:(0,a.jsx)(d.A,{readOnly:!0})}),(0,a.jsx)(i.A.Item,{label:"Date of Registration",name:"signUpDate",children:(0,a.jsx)(d.A,{readOnly:!0})}),(0,a.jsx)(c.Ay,{type:"primary",htmlType:"submit",style:{width:"100%"},disabled:x||g||!e,children:x?(0,a.jsx)(u.A,{}):"Save"})]});var A};var y=r(2263);const x=({onSuccess:e})=>{const[s]=i.A.useForm(),r=(e=>{const s=(0,y.f)();return r=>({password:s(y.C.password),newPassword:s(y.C.password),confirm:[{required:!0,message:"Please confirm your password"},{validator:(s,r,a)=>{r&&r!==e.getFieldValue("newPassword")?a("Passwords do not match"):a()}}]}[r])})(s),{changePass:t,errorElement:o,successElement:l,isLoading:f,isSuccess:h}=(e=>{const[s,{isLoading:r,isSuccess:a,error:n}]=(0,m.SV)(),{errorElement:t}=(0,p.u)({form:e,error:n}),{successElement:o}=w({isSuccess:a,mess:"Password successfully changed"});return{changePass:(e,r)=>{return a=void 0,n=void 0,o=function*(){yield s({password:e,newPassword:r})},new((t=void 0)||(t=Promise))((function(e,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function l(e){try{c(o.throw(e))}catch(e){s(e)}}function c(s){var a;s.done?e(s.value):(a=s.value,a instanceof t?a:new t((function(e){e(a)}))).then(r,l)}c((o=o.apply(a,n||[])).next())}));var a,n,t,o},errorElement:t,successElement:o,isLoading:r,isSuccess:a}})(s);return(0,n.useEffect)((()=>{h&&e&&e()}),[h]),(0,a.jsxs)(i.A,{form:s,name:"ProfilePwdForm",labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},onFinish:e=>{t(e.password,e.newPassword)},autoComplete:"off",children:[o,l,(0,a.jsx)(i.A.Item,{label:"Current Password",name:"password",rules:r("password"),children:(0,a.jsx)(d.A.Password,{placeholder:"Enter current password"})}),(0,a.jsx)(i.A.Item,{label:"New Password",name:"newPassword",rules:r("newPassword"),children:(0,a.jsx)(d.A.Password,{placeholder:"Enter new password"})}),(0,a.jsx)(i.A.Item,{label:"Confirm password",name:"confirm",rules:r("confirm"),children:(0,a.jsx)(d.A.Password,{placeholder:"Confirm password"})}),(0,a.jsx)(c.Ay,{type:"primary",htmlType:"submit",style:{width:"100%"},disabled:f,children:f?(0,a.jsx)(u.A,{}):"Change"})]})},{Text:g}=t.A,A=()=>{const[e,s]=(0,n.useState)(!0);return(0,a.jsxs)("div",{className:"ProfileSwitcher-module_profileCard-iu57k",children:[(0,a.jsx)("h4",{className:"ProfileSwitcher-module_title-mlJp_",children:e?"Personal data":"Password change"}),e?(0,a.jsx)(h,{}):(0,a.jsx)(x,{}),(0,a.jsx)(o.A,{}),(0,a.jsxs)(l.A,{direction:"vertical",align:"center",style:{width:"100%"},children:[(0,a.jsx)(g,{type:"secondary",children:e?"Want to change your password?":""}),(0,a.jsx)(c.Ay,{type:"link",onClick:()=>{s((e=>!e))},children:e?"Password change":"Back to Profile"})]})]})},P=()=>(0,a.jsx)(A,{})},7231:(e,s,r)=>{r.d(s,{u:()=>o});var a=r(6540),n=r(5142),t=r(5515);const o=({form:e,error:s})=>{const[r,o]=n.Ay.useMessage();return(0,a.useEffect)((()=>{if(s){(0,t.jS)(s),e&&e.setFields((0,t.z6)(s));const a=(0,t.bu)(s);a&&r.error(a)}}),[s,e,r]),{errorElement:o}}},2263:(e,s,r)=>{r.d(s,{C:()=>a,f:()=>n});const a={email:"email",password:"password"},n=()=>e=>({email:[{required:!0,message:"Please input your email"},{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Please enter a valid email address"}],password:[{required:!0,message:"Please enter your password"}]}[e])}}]);
//# sourceMappingURL=448.e5da9c61ba01245797c3.js.map